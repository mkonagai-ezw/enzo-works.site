<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ENZO WORKS</title>
    <link rel="icon" href="images/favicon.png">
    <link rel="apple-touch-icon" href="images/favicon.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="header">
        <div class="logo">
            <img src="images/logo.png" alt="ENZO WORKS" class="logo-img">
        </div>
        <div class="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <nav class="nav">
            <ul>
                <li><a href="#about">About</a></li>
                <li><a href="#service">Service</a></li>
                <li><a href="#contact" class="btn-contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h1 class="main-title">Think freely,<br>Build smart.</h1>
            
            <p class="sub-text">
                愛媛・西条を拠点に。<br>
                自由な発想と確かな技術で、ビジネスを加速させる。
            </p>
            
        </div>
    </section>

    <section id="about" class="section">
        <div class="container">
            <h2 class="section-title">About Me</h2>
            
            <div class="about-wrapper">
                <div class="about-image">
                    <img src="images/profile.png" alt="Profile Icon">
                </div>
                
                <div class="about-text">
                    <h3>KONAGAI MASAHIRO</h3>
                    <p class="role">Creative Director / Engineer</p>
                    <p class="description">
                        東京から移住し、愛媛・西条を拠点に活動するクリエイティブパートナー。<br>
                        「Think freely, Build smart.」を掲げ、Web制作からAI活用まで、
                        ビジネスとテクノロジーの架け橋として伴走します。
                    </p>
                </div>
            </div>
        </div>
    </section>

    <section id="service" class="section">
        <div class="container">
            <h2 class="section-title">Service</h2>
            <p class="section-desc">ENZO WORKSがご提供する8つの価値。</p>
            
            <div class="service-grid">
                <div class="service-card">
                    <div class="icon-box">
                        <i class="fa-solid fa-laptop-code"></i>
                    </div>
                    <h3>Webサービス開発</h3>
                    <p>コーポレートサイトからWebアプリケーションまで。<br>ビジネスの成長を支える基盤を構築します。</p>
                </div>

                <div class="service-card">
                    <div class="icon-box">
                        <i class="fa-solid fa-pen-nib"></i>
                    </div>
                    <h3>デザイン</h3>
                    <p>ロゴ制作、UI/UXデザイン、ブランディング。<br>想いを視覚化し、ユーザーの心に届けます。</p>
                </div>

                <div class="service-card">
                    <div class="icon-box">
                        <i class="fa-solid fa-robot"></i>
                    </div>
                    <h3>AI活用コンサルティング</h3>
                    <p>ChatGPTなどの最新AI技術を導入支援。<br>新しい可能性とイノベーションを創出します。</p>
                </div>

                <div class="service-card">
                    <div class="icon-box">
                        <i class="fa-solid fa-chart-line"></i>
                    </div>
                    <h3>業務効率化</h3>
                    <p>社内DXの推進や自動化ツールの導入。<br>無駄を省き、本質的な業務に集中できる環境を。</p>
                </div>

                <div class="service-card">
                    <div class="icon-box">
                        <i class="fa-solid fa-music"></i>
                    </div>
                    <h3>楽曲制作</h3>
                    <p>動画BGMからブランドイメージソングまで。<br>世界観を音で表現し、コンテンツの魅力を最大化します。</p>
                </div>

                <div class="service-card">
                    <div class="icon-box">
                        <i class="fa-solid fa-film"></i>
                    </div>
                    <h3>動画制作</h3>
                    <p>プロモーション映像からSNS用動画編集まで。<br>視覚と聴覚に訴えるコンテンツで、魅力を強力に発信します。</p>
                </div>

                <div class="service-card">
                    <div class="icon-box">
                        <i class="fa-solid fa-chalkboard-user"></i>
                    </div>
                    <h3>セミナー登壇</h3>
                    <p>ITトレンド、AI活用、キャリア形成など。<br>実体験に基づいたナレッジを、初心者にも分かりやすく解説します。</p>
                </div>

                <div class="service-card">
                    <div class="icon-box">
                        <i class="fa-solid fa-comments"></i>
                    </div>
                    <h3>漠然としたご相談</h3>
                    <p>「何から手をつければいいかわからない」<br>そんな段階からの壁打ちも大歓迎。一緒に課題を整理しましょう。</p>
                </div>

            </div>
        </div>
    </section>

    <section id="sandbox" class="section">
    <div class="container">
        <h2 class="section-title">Sandbox</h2>
        <p class="section-subtitle">ENZOWORKSが思うがままに作ったもの。</p>

        <div class="sandbox-project">
            <h3 class="project-name">AIは株価と為替を予測できるのかシステム</h3>
            
            <div class="prediction-dashboard">
                <div class="deviation-card">
                    <h3>AI Deviation Rate</h3>
                    <div class="deviation-value" id="deviation-rate">Loading...</div>
                    <p class="deviation-desc">Difference between GPT and Gemini views</p>
                </div>

                <div class="ai-cards">
                    <div class="ai-card gpt-card">
                        <div class="ai-icon">🤖</div>
                        <h3>GPT-3.5</h3>
                        <div class="price-display">
                            <span class="currency">¥</span>
                            <span class="price" id="gpt-price">---.---</span>
                        </div>
                        <div class="change-rate" id="gpt-change">--.--%</div>
                    </div>

                    <div class="ai-card gemini-card">
                        <div class="ai-icon">✨</div>
                        <h3>Gemini Flash</h3>
                        <div class="price-display">
                            <span class="currency">¥</span>
                            <span class="price" id="gemini-price">---.---</span>
                        </div>
                        <div class="change-rate" id="gemini-change">--.--%</div>
                    </div>
                </div>
                
                <p class="last-updated">Last Updated: <span id="update-time">--/-- --:--</span></p>
                <p class="disclaimer">※ AI予測は投資助言ではありません。</p>
            </div>
        </div>
    </div>
</section>

    <section id="contact" class="section">
        <div class="container">
            <h2 class="section-title">Contact</h2>
            <p class="section-desc">制作のご依頼・ご相談はお気軽にどうぞ。</p>
            
            <div class="contact-btn-wrapper">
                <button id="openModalBtn" class="main-btn">
                    <i class="fa-solid fa-envelope"></i> お問い合わせフォームを開く
                </button>
            </div>
        </div>
    </section>

    <footer style="text-align: center; padding: 20px; font-size: 12px; color: #666;">
        &copy; 2025 ENZO WORKS. All Rights Reserved.
    </footer>

    <div id="contactModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3>お問い合わせ</h3>
            <div class="form-wrapper">
                <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSc7f9_SiHYfANYvZYiT-5-wZlVxcJZI4z1v-vyoNrNcSwQ61g/viewform?embedded=true" width="640" height="800" frameborder="0" marginheight="0" marginwidth="0">読み込んでいます…</iframe>
            </div>
        </div>
    </div>

    <div class="music-player">
        <div class="player-header">ENZO WORKS original tracks</div>

        <audio id="audio"></audio>

        <div id="playlistPopup" class="playlist-popup">
            <div class="playlist-header">
                <span class="header-text">PLAYLIST</span>
                <span id="closePlaylistBtn" class="close-playlist">&times;</span>
            </div>
            <div id="playlistItems" class="playlist-items">
                </div>
        </div>
        
        <div class="player-content">
            <div class="art-wrapper" id="artWrapper">
                <img src="" id="musicArt" alt="Art" class="music-art">
            </div>

            <div class="text-info" id="textInfoArea">
                <span id="musicTitle" class="track-title">Loading...</span>
                <div class="marquee-container">
                    <span id="musicDesc" class="track-desc">Loading...</span>
                </div>
            </div>

            <div class="controls">
                <div id="prevBtn" class="control-btn prev-btn"><i class="fa-solid fa-backward-step"></i></div>
                <div id="playBtn" class="control-btn play-btn"><i id="playIcon" class="fa-solid fa-play"></i></div>
                <div id="nextBtn" class="control-btn next-btn"><i class="fa-solid fa-forward-step"></i></div>
                <div id="listBtn" class="control-btn list-btn"><i class="fa-solid fa-list-ul"></i></div>
            </div>
        </div>
    </div>

    <script>
        // --- ハンバーガーメニュー ---
        const hamburger = document.querySelector('.hamburger');
        const nav = document.querySelector('.nav');

        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            nav.classList.toggle('active');
        });

        document.querySelectorAll('.nav a').forEach(link => {
            link.addEventListener('click', () => {
                hamburger.classList.remove('active');
                nav.classList.remove('active');
            });
        });

        // --- モーダル ---
        const modal = document.getElementById('contactModal');
        const openBtn = document.getElementById('openModalBtn');
        const closeBtn = document.querySelector('.close-btn');

        openBtn.addEventListener('click', () => {
            modal.style.display = 'flex';
        });

        closeBtn.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        window.addEventListener('click', (e) => {
            if (e.target == modal) {
                modal.style.display = 'none';
            }
        });

        // --- 音楽プレイヤー ---
        const playlist = [
            { 
                src: 'audio/audio02.mp3', 
                art: 'audio/02audio.png', 
                title: 'ノスタルジーイズオトナリ', 
                desc: '少子化をテーマにしたブリンバンボンな曲。' 
            },
            { 
                src: 'audio/audio03.mp3', 
                art: 'audio/03audio.png', 
                title: '亡霊', 
                desc: '某映画PJの主題歌候補に作成、たぶんボツになる。' 
            },
            { 
                src: 'audio/audio04.mp3', 
                art: 'audio/04audio.png', 
                title: 'カクサンキボウ', 
                desc: '最近っぽいナウい曲を作りたくて制作' 
            },
            { 
                src: 'audio/audio01.mp3', 
                art: 'audio/01audio.png', 
                title: 'レイジモード', 
                desc: '我が家の3歳末っ子の怒りを表現した楽曲、この曲かけると怒りが親子ともに怒りが静まる' 
            }
        ];

        let currentTrackIndex = 0;
        let isPlaying = false;

        const audio = document.getElementById('audio');
        const playBtn = document.getElementById('playBtn');
        const playIcon = document.getElementById('playIcon');
        const nextBtn = document.getElementById('nextBtn');
        const prevBtn = document.getElementById('prevBtn');
        const listBtn = document.getElementById('listBtn');
        const closePlaylistBtn = document.getElementById('closePlaylistBtn'); // ×ボタン
        
        const musicTitle = document.getElementById('musicTitle');
        const musicDesc = document.getElementById('musicDesc');
        const musicArt = document.getElementById('musicArt');
        const playerContent = document.querySelector('.player-content');
        const playlistPopup = document.getElementById('playlistPopup');
        const playlistItems = document.getElementById('playlistItems');
        const artWrapper = document.getElementById('artWrapper');
        const textInfoArea = document.getElementById('textInfoArea');

        function loadTrack(index) {
            const track = playlist[index];
            audio.src = track.src;
            musicTitle.textContent = track.title;
            musicDesc.textContent = track.desc;
            musicArt.src = track.art;
            audio.load();
            updateActivePlaylistItem(index);
        }

        function createPlaylistHTML() {
            playlistItems.innerHTML = '';
            playlist.forEach((track, index) => {
                const item = document.createElement('div');
                item.classList.add('playlist-item');
                if (index === currentTrackIndex) item.classList.add('active');
                
                item.innerHTML = `
                    <img src="${track.art}" class="list-thumb">
                    <div class="list-info">
                        <div class="list-title">${track.title}</div>
                    </div>
                `;
                
                item.addEventListener('click', () => {
                    currentTrackIndex = index;
                    loadTrack(currentTrackIndex);
                    playMusic();
                });
                
                playlistItems.appendChild(item);
            });
        }

        function updateActivePlaylistItem(index) {
            const items = document.querySelectorAll('.playlist-item');
            items.forEach((item, i) => {
                if (i === index) item.classList.add('active');
                else item.classList.remove('active');
            });
        }

        function playMusic() {
            audio.play();
            isPlaying = true;
            playIcon.classList.remove('fa-play');
            playIcon.classList.add('fa-pause');
            playerContent.classList.add('playing');
        }

        function pauseMusic() {
            audio.pause();
            isPlaying = false;
            playIcon.classList.remove('fa-pause');
            playIcon.classList.add('fa-play');
            playerContent.classList.remove('playing');
        }

        function togglePlay() {
            if (isPlaying) pauseMusic();
            else playMusic();
        }

        function nextTrack() {
            currentTrackIndex++;
            if (currentTrackIndex >= playlist.length) currentTrackIndex = 0;
            loadTrack(currentTrackIndex);
            if (isPlaying) playMusic();
        }

        function prevTrack() {
            currentTrackIndex--;
            if (currentTrackIndex < 0) currentTrackIndex = playlist.length - 1;
            loadTrack(currentTrackIndex);
            if (isPlaying) playMusic();
        }
        
        function togglePlaylist() {
            playlistPopup.classList.toggle('show');
        }

        createPlaylistHTML();
        loadTrack(currentTrackIndex);
        audio.volume = 0.3;

        playBtn.addEventListener('click', togglePlay);
        nextBtn.addEventListener('click', nextTrack);
        prevBtn.addEventListener('click', prevTrack);
        audio.addEventListener('ended', nextTrack);
        listBtn.addEventListener('click', togglePlaylist);
        artWrapper.addEventListener('click', togglePlaylist);
        textInfoArea.addEventListener('click', togglePlaylist);
        closePlaylistBtn.addEventListener('click', togglePlaylist); // ×ボタンの動作
    </script>
<script>
        async function loadAI() {
            console.log("AIデータの読み込みを開始します...");
            try {
                // キャッシュを回避するためにタイムスタンプを付与
                const response = await fetch('./ai_predictions.json?t=' + new Date().getTime());
                
                if (!response.ok) {
                    throw new Error('JSONファイルの取得に失敗しました。パスを確認してください。');
                }
                
                const data = await response.json();
                console.log("取得データ:", data);

                // 更新時刻
                document.getElementById('update-time').innerText = data.last_updated || '--/-- --:--';
                
                // 乖離率
                const devElem = document.getElementById('deviation-rate');
                if (data.deviation_percent !== undefined) {
                    devElem.innerText = data.deviation_percent + '%';
                }

                // GPTの表示更新
                if (data.gpt && data.gpt.prediction !== null) {
                    document.getElementById('gpt-price').innerText = data.gpt.prediction.toFixed(3);
                    const gptChange = document.getElementById('gpt-change');
                    gptChange.innerText = (data.gpt.change_pct > 0 ? '+' : '') + data.gpt.change_pct + '%';
                    gptChange.className = 'change-rate ' + (data.gpt.change_pct >= 0 ? 'change-plus' : 'change-minus');
                }

                // Geminiの表示更新
                if (data.gemini && data.gemini.prediction !== null) {
                    document.getElementById('gemini-price').innerText = data.gemini.prediction.toFixed(3);
                    const gemChange = document.getElementById('gemini-change');
                    gemChange.innerText = (data.gemini.change_pct > 0 ? '+' : '') + data.gemini.change_pct + '%';
                    gemChange.className = 'change-rate ' + (data.gemini.change_pct >= 0 ? 'change-plus' : 'change-minus');
                }

            } catch (error) {
                console.error("AIデータ読み込みエラー:", error);
                document.getElementById('deviation-rate').innerText = "Data Error";
            }
        }

        // ページ読み込み完了時に実行
        document.addEventListener('DOMContentLoaded', loadAI);
    </script>
</body>
</html>