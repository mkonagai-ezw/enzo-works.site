<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ENZO WORKS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header class="header">
        <div class="logo">
            <img src="images/logo.png" alt="ENZO WORKS" class="logo-img">
        </div>
        <div class="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <nav class="nav">
            <ul>
                <li><a href="#about">About</a></li>
                <li><a href="#service">Service</a></li>
                <li><a href="#contact" class="btn-contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h1 class="main-title">Think freely,<br>Build smart.</h1>
            
            <p class="sub-text">
                愛媛・西条を拠点に。<br>
                自由な発想と確かな技術で、ビジネスを加速させる。
            </p>
            
        </div>
    </section>

    <section id="about" class="section">
        <div class="container">
            <h2 class="section-title">About Me</h2>
            
            <div class="about-wrapper">
                <div class="about-image">
                    <img src="images/profile.png" alt="Profile Icon">
                </div>
                
                <div class="about-text">
                    <h3>KONAGAI MASAHIRO</h3>
                    <p class="role">Creative Director / Engineer</p>
                    <p class="description">
                        東京から移住し、愛媛・西条を拠点に活動するクリエイティブパートナー。<br>
                        「Think freely, Build smart.」を掲げ、Web制作からAI活用まで、
                        ビジネスとテクノロジーの架け橋として伴走します。
                    </p>
                </div>
            </div>
        </div>
    </section>

    <section id="service" class="section">
        <div class="container">
            <h2 class="section-title">Service</h2>
            <p class="section-desc">ENZO WORKSがご提供する4つの価値。</p>
            
            <div class="service-grid">
                <div class="service-card">
                    <div class="icon-box">
                        <i class="fa-solid fa-laptop-code"></i>
                    </div>
                    <h3>Webサービス開発</h3>
                    <p>コーポレートサイトからWebアプリケーションまで。<br>ビジネスの成長を支える基盤を構築します。</p>
                </div>

                <div class="service-card">
                    <div class="icon-box">
                        <i class="fa-solid fa-pen-nib"></i>
                    </div>
                    <h3>デザイン</h3>
                    <p>ロゴ制作、UI/UXデザイン、ブランディング。<br>想いを視覚化し、ユーザーの心に届けます。</p>
                </div>

                <div class="service-card">
                    <div class="icon-box">
                        <i class="fa-solid fa-robot"></i>
                    </div>
                    <h3>AI活用コンサルティング</h3>
                    <p>ChatGPTなどの最新AI技術を導入支援。<br>新しい可能性とイノベーションを創出します。</p>
                </div>

                <div class="service-card">
                    <div class="icon-box">
                        <i class="fa-solid fa-chart-line"></i>
                    </div>
                    <h3>業務効率化</h3>
                    <p>社内DXの推進や自動化ツールの導入。<br>無駄を省き、本質的な業務に集中できる環境を。</p>
                </div>

                <div class="service-card">
                    <div class="icon-box">
                        <i class="fa-solid fa-music"></i>
                    </div>
                    <h3>楽曲制作</h3>
                    <p>動画BGMからブランドイメージソングまで。<br>世界観を音で表現し、コンテンツの魅力を最大化します。</p>
                </div>
                </div>
        </div>
    </section>

    <section id="contact" class="section">
        <div class="container">
            <h2 class="section-title">Contact</h2>
            <p class="section-desc">制作のご依頼・ご相談はお気軽にどうぞ。</p>
            
            <div class="contact-btn-wrapper">
                <button id="openModalBtn" class="main-btn">
                    <i class="fa-solid fa-envelope"></i> お問い合わせフォームを開く
                </button>
            </div>
        </div>
    </section>

    <footer style="text-align: center; padding: 20px; font-size: 12px; color: #666;">
        &copy; 2025 ENZO WORKS. All Rights Reserved.
    </footer>

    <div id="contactModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3>お問い合わせ</h3>
            <div class="form-wrapper">
                <iframe src="https://docs.google.com/forms/d/e/1FAIpQLSc7f9_SiHYfANYvZYiT-5-wZlVxcJZI4z1v-vyoNrNcSwQ61g/viewform?embedded=true" width="640" height="800" frameborder="0" marginheight="0" marginwidth="0">読み込んでいます…</iframe>
            </div>
        </div>
    </div>

    <div class="music-player">
        <div class="player-header">ENZO WORKS original tracks</div>

        <audio id="audio"></audio>

        <div id="playlistPopup" class="playlist-popup">
            <div class="playlist-header">Playlist</div>
            <div id="playlistItems" class="playlist-items">
                </div>
        </div>
        
        <div class="player-content">
            <div class="art-wrapper" id="artWrapper">
                <img src="" id="musicArt" alt="Art" class="music-art">
            </div>

            <div class="text-info" id="textInfoArea">
                <span id="musicTitle" class="track-title">Loading...</span>
                <div class="marquee-container">
                    <span id="musicDesc" class="track-desc">Loading...</span>
                </div>
            </div>

            <div class="controls">
                <div id="prevBtn" class="control-btn prev-btn"><i class="fa-solid fa-backward-step"></i></div>
                <div id="playBtn" class="control-btn play-btn"><i id="playIcon" class="fa-solid fa-play"></i></div>
                <div id="nextBtn" class="control-btn next-btn"><i class="fa-solid fa-forward-step"></i></div>
                <div id="listBtn" class="control-btn list-btn"><i class="fa-solid fa-list-ul"></i></div>
            </div>
        </div>
    </div>
    <script>
        // --- ハンバーガーメニューの動作 ---
        const hamburger = document.querySelector('.hamburger');
        const nav = document.querySelector('.nav');

        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            nav.classList.toggle('active');
        });

        // メニューのリンクをクリックしたら自動で閉じる
        document.querySelectorAll('.nav a').forEach(link => {
            link.addEventListener('click', () => {
                hamburger.classList.remove('active');
                nav.classList.remove('active');
            });
        });

        // --- モーダルの動作 ---
        const modal = document.getElementById('contactModal');
        const openBtn = document.getElementById('openModalBtn');
        const closeBtn = document.querySelector('.close-btn');

        openBtn.addEventListener('click', () => {
            modal.style.display = 'flex';
        });

        closeBtn.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        window.addEventListener('click', (e) => {
            if (e.target == modal) {
                modal.style.display = 'none';
            }
        });

        // --- 音楽プレイヤー（完全版：プレイリスト・戻るボタン対応） ---
        
        // 1. ノスタルジー 2. 亡霊 3. カクサン 4. レイジ の順
        const playlist = [
            { 
                src: 'audio/audio02.mp3', 
                art: 'audio/02audio.png', 
                title: 'ノスタルジーイズオトナリ', 
                desc: '少子化をテーマにしたブリンバンボンな曲。' 
            },
            { 
                src: 'audio/audio03.mp3', 
                art: 'audio/03audio.png', 
                title: '亡霊', 
                desc: '某映画PJの主題歌候補に作成、たぶんボツになる。' 
            },
            { 
                src: 'audio/audio04.mp3', 
                art: 'audio/04audio.png', 
                title: 'カクサンキボウ', 
                desc: '最近っぽいナウい曲を作りたくて制作' 
            },
            { 
                src: 'audio/audio01.mp3', 
                art: 'audio/01audio.png', 
                title: 'レイジモード', 
                desc: '我が家の3歳末っ子の怒りを表現した楽曲' 
            }
        ];

        let currentTrackIndex = 0;
        let isPlaying = false;

        // 要素の取得
        const audio = document.getElementById('audio');
        const playBtn = document.getElementById('playBtn');
        const playIcon = document.getElementById('playIcon');
        const nextBtn = document.getElementById('nextBtn');
        const prevBtn = document.getElementById('prevBtn'); // 戻るボタン
        const listBtn = document.getElementById('listBtn'); // リストボタン
        
        const musicTitle = document.getElementById('musicTitle');
        const musicDesc = document.getElementById('musicDesc');
        const musicArt = document.getElementById('musicArt');
        const playerContent = document.querySelector('.player-content');
        
        // プレイリスト表示用
        const playlistPopup = document.getElementById('playlistPopup');
        const playlistItems = document.getElementById('playlistItems');
        const artWrapper = document.getElementById('artWrapper'); // 開閉トリガー
        const textInfoArea = document.getElementById('textInfoArea'); // 開閉トリガー

        // 曲をロードする関数
        function loadTrack(index) {
            const track = playlist[index];
            audio.src = track.src;
            musicTitle.textContent = track.title;
            musicDesc.textContent = track.desc;
            musicArt.src = track.art;
            audio.load();
            
            // ポップアップ内の選択状態を更新
            updateActivePlaylistItem(index);
        }

        // プレイリストのHTMLを生成する関数
        function createPlaylistHTML() {
            playlistItems.innerHTML = ''; // クリア
            playlist.forEach((track, index) => {
                const item = document.createElement('div');
                item.classList.add('playlist-item');
                if (index === currentTrackIndex) item.classList.add('active');
                
                item.innerHTML = `
                    <img src="${track.art}" class="list-thumb">
                    <div class="list-info">
                        <div class="list-title">${track.title}</div>
                    </div>
                `;
                
                // クリックでその曲を再生
                item.addEventListener('click', () => {
                    currentTrackIndex = index;
                    loadTrack(currentTrackIndex);
                    playMusic();
                });
                
                playlistItems.appendChild(item);
            });
        }

        // リストの選択状態（色）を更新
        function updateActivePlaylistItem(index) {
            const items = document.querySelectorAll('.playlist-item');
            items.forEach((item, i) => {
                if (i === index) item.classList.add('active');
                else item.classList.remove('active');
            });
        }

        // 再生処理
        function playMusic() {
            audio.play();
            isPlaying = true;
            playIcon.classList.remove('fa-play');
            playIcon.classList.add('fa-pause');
            playerContent.classList.add('playing');
        }

        // 停止処理
        function pauseMusic() {
            audio.pause();
            isPlaying = false;
            playIcon.classList.remove('fa-pause');
            playIcon.classList.add('fa-play');
            playerContent.classList.remove('playing');
        }

        // 再生・停止切り替え
        function togglePlay() {
            if (isPlaying) {
                pauseMusic();
            } else {
                playMusic();
            }
        }

        // 次へ
        function nextTrack() {
            currentTrackIndex++;
            if (currentTrackIndex >= playlist.length) {
                currentTrackIndex = 0;
            }
            loadTrack(currentTrackIndex);
            if (isPlaying) playMusic();
        }

        // 前へ
        function prevTrack() {
            currentTrackIndex--;
            if (currentTrackIndex < 0) {
                currentTrackIndex = playlist.length - 1; // 最後の曲に戻る
            }
            loadTrack(currentTrackIndex);
            if (isPlaying) playMusic();
        }
        
        // プレイリストの表示切り替え
        function togglePlaylist() {
            playlistPopup.classList.toggle('show');
        }

        // 初期設定
        createPlaylistHTML(); // リスト生成
        loadTrack(currentTrackIndex);
        audio.volume = 0.3;

        // イベント設定
        playBtn.addEventListener('click', togglePlay);
        nextBtn.addEventListener('click', nextTrack);
        prevBtn.addEventListener('click', prevTrack);
        audio.addEventListener('ended', nextTrack);
        
        // リストボタン、アートワーク、テキストエリアをクリックでリスト開閉
        listBtn.addEventListener('click', togglePlaylist);
        artWrapper.addEventListener('click', togglePlaylist);
        textInfoArea.addEventListener('click', togglePlaylist);
    </script>

</body>
</html>